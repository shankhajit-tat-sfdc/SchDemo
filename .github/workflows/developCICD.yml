
# This is a basic workflow to validate pull request from feature branch to develop 

name: ValidatePullRequestsToDevelop
# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the develop branch
  push:
    branches: ["develop"]
  pull_request:
    branches: ["develop"]
  workflow_dispatch:
   # Jobs to be executed
jobs:
    validate-pull-req-in-sit:
        runs-on: ubuntu-latest
        steps:
        # Checkout the source code
            - name: 'Checkout source code'
              uses: actions/checkout@v2
       # Install Salesforce CLI AND DEPLOY TO sit
            - uses: sfdx-actions/setup-sfdx@v1
              with:
               sfdx-auth-url: ${{ secrets.SIT_AUTH_SECRET }}
            - name: 'Push source to Acc org'
              run: sfdx force:source:deploy --testlevel RunLocalTests --checkonly  -p force-app/main/default --verbose

   
